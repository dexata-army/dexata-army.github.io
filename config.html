<!DOCTYPE HTML>
<html>
	<head>
		<title>Dexata - config</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/pagestyle.css" />
		<link rel="stylesheet" href="assets/css/print.css" />
		<link rel="icon" type="image/svg" href="images/logo.png">
		
		<script src="assets/js/sleep.js"></script>
		<script src="assets/js/watchlist.js"></script>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
		
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-D70JLR4EJM"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		
		  gtag('config', 'G-D70JLR4EJM');
		</script>
	</head>
	<body class="is-preload">
		<!-- Header -->
		<header id="header" class="alt">
			<div class="logo" style="margin-top: -25px">
				<noselect>
					<a href="index.html"><img src="images/logo.png" height="45px" style="vertical-align: middle"> Dexata</a> &nbsp; 
					<a href="search.html"><i class="fas fa-search fa-1x" style="vertical-align:middle"></i></a> 
					<a href="config.html"><i class="fas fa-cogs fa-1x" style="vertical-align:middle"></i></a> 
				</noselect>
			</div>
		
			<nav id="nav">
				<ul>
					<li><a href="index.html">home</a></li>
					<li><a href="coins.html">coins</a></li>
					<li><a href="watchlist.html">watchlist</a></li>
				</ul>
			</nav>
		</header>

		<!-- Wrapper -->
		<div id="wrapper">
			<!-- One -->
			<section id="one" class="wrapper style1">
				<div class="inner">
					<div class="spotlights">
						<center>
							<div class="spotlight" style="max-width:500px; margin-bottom: 35px">
								<div class="content">
									<h1><i class="fas fa-cogs fa-3x" style="vertical-align:middle"></i><br><noselect>Config</noselect></h1>
								</div>
							</div>
		
							<a onclick="save_config()"><i class="fas fa-save fa-3x"></i></a><br><br>
		
							<div class="spotlight" style="max-width:500px">
								<table>
									<tr>
										<td>Refresh speed (sec)</td>
										<td><input id="refresh_sec" spellcheck="false"></td>
									</tr>
									<tr>
										<td>BSC address</td>
										<td><input id="bsc_addr" spellcheck="false"></td>
									</tr>
									<tr>
										<td>BSCScan API key</td>
										<td><input id="bscscan_api_key" spellcheck="false"></td>
									</tr>
								</table>
							</div>
		
							<div>
								<p>
									Watchlist<br>
									<textarea id="watchlist" spellcheck="false" style="max-width:100%; width: 400px; height: 250px"></textarea>
								</p>
		
								<p>
									Ignore list<br>
									<textarea id="ignorelist" spellcheck="false" style="max-width:100%; width: 400px; height: 250px"></textarea>
								</p>
							</div>
		
							<p>
								<img src="images/btc-illustration.png" style="max-width:80%; width: 150px; margin-top: 20px">
							</p>
						</center>
					</div>
				</div>
			</section>
		</div>
		
		
		
		<script>
		
			load_watchlist();
		
			function load_config()
			{
				if(localStorage.getItem('refresh_sec'))
					document.getElementById("refresh_sec").value = localStorage.getItem('refresh_sec');
				else
				{
					localStorage.setItem('refresh_sec', 60);
					document.getElementById("refresh_sec").value = 60;
				}
		
				if(localStorage.getItem('bsc_addr'))
					document.getElementById("bsc_addr").value = localStorage.getItem('bsc_addr');
		
				if(localStorage.getItem('bscscan_api_key'))
					document.getElementById("bscscan_api_key").value = localStorage.getItem('bscscan_api_key');
		
				if(localStorage.getItem('dexata_watchlist'))
					document.getElementById("watchlist").value = localStorage.getItem('dexata_watchlist');
		
				if(localStorage.getItem('dexata_ignorelist'))
					document.getElementById("ignorelist").value = localStorage.getItem('dexata_ignorelist');
			}
		
			function remove_duplicates(x)
			{
				return x.filter(function(item, pos) {
				    return x.indexOf(item) == pos;
				})
			}
		
			function save_config()
			{
				var valid_config = 1;
		
				if(document.getElementById("refresh_sec").value == "")
				{
					valid_config = 0;
					alert("refresh time must be specified (use 0 to not refresh)");
				}
				else if(document.getElementById("refresh_sec").value < 0)
				{
					valid_config = 0;
					alert("refresh time must be a non-negative numer (use 0 to not refresh)");
				}
				else if(document.getElementById("refresh_sec").value < 30)
				{
					valid_config = 0;
					alert("refresh time too frequent (use 0 to not refresh)");
				}
		
				if(valid_config)
				{
					localStorage.setItem('refresh_sec', document.getElementById("refresh_sec").value);
					localStorage.setItem('bsc_addr', document.getElementById("bsc_addr").value);
					localStorage.setItem('bscscan_api_key', document.getElementById("bscscan_api_key").value);
					document.getElementById("watchlist").value = remove_duplicates(document.getElementById("watchlist").value.replace(/ /g,"").replace(/;/g, "\n").replace(/,/g, "\n").split("\n").sort()).join("\n")
					localStorage.setItem('dexata_watchlist', document.getElementById("watchlist").value);
					localStorage.setItem('dexata_ignorelist', document.getElementById("ignorelist").value);
					
					alert("config saved successfully");
				}
			}
		
			load_config();
		</script>

		<!-- Footer -->
		<div class="wrapper">
			<div class="inner" style="text-align:center">
				<noselect>
					<p>
						<a href="search.html"><i class="fas fa-search fa-2x"></i></a> &nbsp;
						<a href="config.html"><i class="fas fa-cogs fa-2x"></i></a> &nbsp;
						<a href="coins.html"><i class="fas fa-coins fa-2x"></i></a> &nbsp;
						<a href="watchlist.html"><i class="fas fa-binoculars fa-2x"></i></a> &nbsp;
						<a href="https://t.me/dexata_army"><i class="icon brands fa-telegram fa-2x"></i></a> &nbsp;&nbsp;
						<a href="https://twitter.com/dexata_army"><i class="icon brands fa-twitter fa-2x"></i></a>
					</p>
		
					<p style="margin-top: -30px">
						<input id="footer_search_box" placeholder="search">
					</p>
		
					<p class="copyright" style="margin-top:-20px">
						&copy;<script>document.write(new Date().getFullYear())</script> Dexata
					</p>
				</noselect>
			</div>
		</div>
		
		<script>
			window.addEventListener('keydown',this.keydown,false);
		
			function keydown(e)
			{
				var code = e.keyCode;
				
				if(document.activeElement.tagName == "INPUT")
				{
					if(code == 13)
					{
						if(document.activeElement.id == "footer_search_box")
						{
							window.location.href = "search.html?term=" + document.getElementById('footer_search_box').value;
						}
					}
				}
			}
		</script>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

		<!-- https://printjs.crabbly.com/ -->
		<script src="assets/js/print.js"></script>
	</body>
</html>

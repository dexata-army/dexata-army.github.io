<!DOCTYPE HTML>
<html>
	<head>
		<title>Dexata - search</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/pagestyle.css" />
		<link rel="stylesheet" href="assets/css/print.css" />
		<link rel="icon" type="image/svg" href="images/logo.png">
		
		<!-- Scripts -->
		<script src="assets/js/params.js"></script>
		<script src="assets/js/sleep.js"></script>
		<script src="assets/js/wallet.js"></script>
		<script src="assets/js/watchlist.js"></script>
		<script src="assets/js/apex-charts/apexcharts.min.js"></script>
		<script src="assets/js/crypto-js/crypto-js.js"></script>
		
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		
		<!-- https://printjs.crabbly.com/ -->
		<script src="assets/js/print.js"></script>
		
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-D70JLR4EJM"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		
		  gtag('config', 'G-D70JLR4EJM');
		</script>

		<script>
			var user = "guest";
		
			if(localStorage.getItem('username'))
				user = localStorage.getItem('username');
			else if(sessionStorage.getItem('username'))
				user = sessionStorage.getItem('username');
		
			function logout()
			{
				localStorage.removeItem('no_dexata_tabs');
				localStorage.removeItem('last_load_time');
				localStorage.removeItem('last_seen');
				localStorage.removeItem('username');
				sessionStorage.removeItem('username');
				localStorage.removeItem('password');
				sessionStorage.removeItem('password');
				//location.reload();
			}
		
			function check_for_logout(username)
			{
				sleep(2000).then(() => { 
					if((!sessionStorate.getItem('username') && !localStorage.getItem('username')) || 
						(sessionStorage.getItem('username') != username && localStorage.getItem('username') != username))
						location.reload();
					else
						check_for_logout(username);
				});
			}
		
			var session_timeout_sec = localStorage.getItem(user + '-session_timeout')*60;
		
			if(session_timeout_sec != undefined && session_timeout_sec > 0)
			{
				if(sessionStorage.getItem('username') || localStorage.getItem('username'))
				{
					var curr_time = Math.round((new Date()).getTime() / 1000);
		
					//checks last page load time
					if(localStorage.getItem("last_load_time"))
					{
						if(curr_time - localStorage.getItem("last_load_time") > session_timeout_sec)
						{
							logout();
							location.reload();
						}
						else
							localStorage.setItem("last_load_time", curr_time);
					}
					else
					{
						logout();
						location.reload();
					}
				}
			}
		
			if(sessionStorage.getItem("username") && !localStorage.getItem("username"))
			{
				var curr_time = Math.round((new Date()).getTime() / 1000);
				if(!localStorage.getItem("last_seen") ||
				     curr_time - localStorage.getItem("last_seen") > 2)
				{
					logout();
					location.reload();
				}
				else
				{
					localStorage.setItem("no_dexata_tabs", 0);
					localStorage.setItem("username", sessionStorage.getItem("username"));
					localStorage.setItem("password", sessionStorage.getItem("password"));
				}
			}
			else if(!sessionStorage.getItem("username") && localStorage.getItem("username"))
			{
				sessionStorage.setItem("username", localStorage.getItem("username"));
				sessionStorage.setItem("password", localStorage.getItem("password"));
			}
		
			var load_host = window.location.hostname;
			if(localStorage.getItem("username"))
			{
				//updates number of dexata tabs open
				if(localStorage.getItem('no_dexata_tabs') != undefined &&
					localStorage.getItem('no_dexata_tabs') >= 0)
					localStorage.setItem('no_dexata_tabs', parseFloat(localStorage.getItem('no_dexata_tabs'))+1);
				else
					localStorage.setItem('no_dexata_tabs', 1);
		
				window.addEventListener('beforeunload', function (e) {
					if(localStorage.getItem('no_dexata_tabs'))
					{
					    localStorage.setItem('no_dexata_tabs', parseFloat(localStorage.getItem('no_dexata_tabs'))-1);
		
					    if(localStorage.getItem('no_dexata_tabs') == 0)
					    {
					    	localStorage.removeItem('no_dexata_tabs');
					    	localStorage.removeItem('username');
					    	localStorage.removeItem('password');
					    }
					}
					else
					{
						sessionStorage.removeItem('username');
						sessionStorage.removeItem('password');
					}
				});
		
				//reloads page if user has logged out
				$(document).ready(function(){
					check_for_logout(localStorage.getItem('username'));
				});
			}
		
			window.addEventListener("pageshow", function (event) {
				var historyTraversal = event.persisted || 
				                     ( typeof window.performance != "undefined" && 
				                          window.performance.navigation.type === 2 );
				if(historyTraversal &&
					sessionStorage.getItem('username') &&
					curr_time - localStorage.getItem('last_seen') > 2)
				{
					// Handle page restore.
					window.location.reload();
				}
			});
		
			window.onbeforeunload = function(){
				if(sessionStorage.getItem('username') || localStorage.getItem('username'))
					localStorage.setItem('last_seen', Math.round((new Date()).getTime() / 1000));
			};
		</script>
	</head>
	<body class="is-preload">
		<!-- Header -->
		<header id="header" class="alt">
			<div class="logo" style="margin-top: -25px">
				<noselect>
					<a href="index.html"><img src="images/logo.png" height="45px" style="vertical-align: middle"> Dexata</a> &nbsp; 
					<a href="search.html" title='search'><i class="fas fa-search fa-1x" style="vertical-align:middle"></i></a> 
					<a href="config.html" title='config'><i class="fas fa-cogs fa-1x" style="vertical-align:middle"></i></a> 
					<a href="manage_users.html" title='manage users'><i class="fas fa-user-cog fa-1x" style="vertical-align:middle"></i></a> 
				</noselect>
			</div>
		
			<nav id="nav">
				<ul>
					<li><a href="index.html">home</a></li>
					<li><a href="coins.html">coins</a></li>
					<li><a href="categories.html">categories</a></li>
					<li><a href="charts.html">charts</a></li>
					<li><a href="news.html">news</a></li>
					<li><a href="scams.html">scams</a></li>
					<li><a href="watchlist.html">watchlist</a></li>
					<li><a href="wallet.html">wallet</a></li>
					<li id="login_menu_item"></li>
				</ul>
			</nav>
		</header>

		<!-- Wrapper -->
		<div id="wrapper">
			<!-- One -->
			<section id="one" class="wrapper style1">
				<div class="inner">
					<div class="spotlights">
						<center>
							<div class="spotlight" style="max-width:500px; margin-bottom: 50px">
								<div class="content">
									<h1><i class="fas fa-search fa-4x" style="vertical-align:middle"></i><br><noselect>Search</noselect></h1>
								</div>
							</div>
		
							<center>
								<select name="network_select" id="network_select" style="width:170px" onchange="change_search_network()">
									<option disabled selected hidden>network</option>
									<option value="algorand">algorand</option>
									<option value="arbitrum-one">arbitrum-one</option>
									<option value="avalanche">avalanche</option>
									<option value="binance-smart-chain">bsc</option>
									<option value="cosmos">cosmos</option>
									<option value="ethereum">ethereum</option>
									<option value="factom">factom</option>
									<option value="fantom">fantom</option>
									<option value="harmony-shard-0">harmony</option>
									<option value="iotex">iotex</option>
									<option value="kava">kava</option>
									<option value="komodo">komodo</option>
									<option value="kusama">kusama</option>
									<option value="mdex">mdex</option>
									<option value="moonriver">moonriver</option>
									<option value="nuls">nuls</option>
									<option value="polkadot">polkadot</option>
									<option value="polygon">polygon</option>
									<option value="solana">solana</option>
									<option value="stellar">stellar</option>
									<option value="telos">telos</option>
									<option value="terra">terra</option>
								</select>
							</center>
							<input id="contract_input" placeholder="contract" style="margin-top:10px"><br><br>
		
							<input id="search_input" placeholder="search" style="margin-bottom:15px"><br>
		
							<div id="table_spotlight" class="spotlight" style="max-width:100%; display: none">
								<div id="table_div" class="xscroll">
									<div id="no_results_msg" style=""></div>
									<img id="loading_gif" src="images/loading.gif" style="margin-top: 20px; max-width: 150px">
									<table id="coins_table" style="display: none">
										<thead>
											<tr>
												<th><a onclick="toggle_sort('rank')">rank</a></th>
												<th></th>
												<th><a onclick="toggle_sort('symbol')">symbol</a></th>
												<th><a onclick="toggle_sort('name')">name</a></th>
												<th><a onclick="toggle_sort('current_price')">price</a></th>
												<th id="change_hour_row_head"><a onclick="toggle_sort('price_change_percentage_1h_in_currency')">hour</a></th>
												<th id="change_day_row_head"><a onclick="toggle_sort('price_change_percentage_24h')">day</a></th>
												<th id="change_week_row_head"><a onclick="toggle_sort('price_change_percentage_7d_in_currency')">week</a></th>
												<th id="change_month_row_head"><a onclick="toggle_sort('price_change_percentage_30d_in_currency')">month</a></th>
												<th id="change_year_row_head"><a onclick="toggle_sort('price_change_percentage_1y_in_currency')">year</a></th>
												<th><a onclick="toggle_sort('market_cap')">market cap</a></th>
												<th><a onclick="toggle_sort('total_volume')">volume</a></th>
											</tr>
										</thead>
										<tfoot>
											<tr>
												<th><a onclick="toggle_sort('rank')">rank</a></th>
												<th></th>
												<th><a onclick="toggle_sort('symbol')">symbol</a></th>
												<th><a onclick="toggle_sort('name')">name</a></th>
												<th><a onclick="toggle_sort('current_price')">price</a></th>
												<th id="change_hour_row_foot"><a onclick="toggle_sort('price_change_percentage_1h_in_currency')">hour</a></th>
												<th id="change_day_row_foot"><a onclick="toggle_sort('price_change_percentage_24h')">day</a></th>
												<th id="change_week_row_foot"><a onclick="toggle_sort('price_change_percentage_7d_in_currency')">week</a></th>
												<th id="change_month_row_foot"><a onclick="toggle_sort('price_change_percentage_30d_in_currency')">month</a></th>
												<th id="change_year_row_foot"><a onclick="toggle_sort('price_change_percentage_1y_in_currency')">year</a></th>
												<th><a onclick="toggle_sort('market_cap')">market cap</a></th>
												<th><a onclick="toggle_sort('total_volume')">volume</a></th>
											</tr>
										</tfoot>
									</table>
								</div>
							</div>
							<noselect id="page_controls">
								<a id="prev_page_link" onclick="prev_page(); document.getElementById('table_div').scrollIntoView();" style="visibility: hidden;"><i class="fas fa-arrow-circle-left fa-2x" style="vertical-align: middle"></i></a> &nbsp;&nbsp;
								<input id="page_input" style="width: 75px; vertical-align: middle; visibility: hidden"> &nbsp;&nbsp;
								<a id="next_page_link" onclick="next_page(); document.getElementById('table_div').scrollIntoView();" style="visibility: hidden"><i class="fas fa-arrow-circle-right fa-2x" style="vertical-align: middle"></i></a>
							</noselect>
						</center>
					</div>
				</div>
			</section>
		</div>
		
		<script>
			var search_network = "bsc";
		
			var page_no = 1;
			var no_pages = 0;
			var refresh_ms = 60000;
		
			var sort_attrib = 'market_cap';
			var sort_dir = -1;
			var coins_data;
			var all_coins_data;
		
			var ids;
		
			window.addEventListener('keydown',this.keydown,false);
			//window.addEventListener('keyup',this.keyup,false);
		
			if(localStorage.getItem(user + '-refresh_sec'))
				refresh_ms = 1000*localStorage.getItem(user + '-refresh_sec');
			else
				localStorage.setItem(user + '-refresh_sec', 60);
		
			if(localStorage.getItem(user + '-search_network'))
				search_network = localStorage.getItem(user + '-search_network');
			else
				localStorage.setItem(user + '-search_network', 'bsc');
		
			document.getElementById('network_select').value = search_network;
		
				if(!localStorage.getItem(user + "-change_hour") &&
			   !localStorage.getItem(user + "-change_day") &&
			   !localStorage.getItem(user + "-change_week") &&
			   !localStorage.getItem(user + "-change_month") &&
			   !localStorage.getItem(user + "-change_year"))
			{
				localStorage.setItem(user + "-change_hour", true);
				localStorage.setItem(user + "-change_day", true);
				localStorage.setItem(user + "-change_week", true);
				localStorage.setItem(user + "-change_month", true);
				localStorage.setItem(user + "-change_year", true);
			}
		
			if(!localStorage.getItem(user + "-change_hour"))
			{
				document.getElementById('change_hour_row_head').style.display = "none";
				document.getElementById('change_hour_row_foot').style.display = "none";
			}
		
			if(!localStorage.getItem(user + "-change_day"))
			{
				document.getElementById('change_day_row_head').style.display = "none";
				document.getElementById('change_day_row_foot').style.display = "none";
			}
		
			if(!localStorage.getItem(user + "-change_week"))
			{
				document.getElementById('change_week_row_head').style.display = "none";
				document.getElementById('change_week_row_foot').style.display = "none";
			}
		
			if(!localStorage.getItem(user + "-change_month"))
			{
				document.getElementById('change_month_row_head').style.display = "none";
				document.getElementById('change_month_row_foot').style.display = "none";
			}
		
			if(!localStorage.getItem(user + "-change_year"))
			{
				document.getElementById('change_year_row_head').style.display = "none";
				document.getElementById('change_year_row_foot').style.display = "none";
			}
		
			function change_search_network()
			{
				search_network = document.getElementById('network_select').value;
				localStorage.setItem(user + '-search_network', search_network);
			}
		
			function clear_table()
			{
				var table = document.getElementById("coins_table");
		
				var no_rows = table.rows.length-2;
				for(var i=0; i < no_rows; i++)
					table.deleteRow(1);		
			}
		
			function draw_table()
			{
				clear_table();
				var table = document.getElementById("coins_table");
				document.getElementById("page_input").value = page_no;
		
				document.getElementById('loading_gif').style.visibility = "hidden";
				document.getElementById('loading_gif').style.display = "none";
				document.getElementById("coins_table").style.display = "inline";
		
				for(var i=0; i<coins_data.length; i++)
				{
					var row = table.insertRow(i+1);
					row.insertCell(0).innerHTML = coins_data[i]['market_cap_rank'];
					if(coins_data[i]['image'] != "")
						row.insertCell(1).innerHTML = "<img style='min-width: 23px; max-height: 23px; vertical-align:middle' class='rounded' onerror='this.style.display=\"none\"' src='" + coins_data[i]['image'] + "'>";
					row.insertCell(2).innerHTML = coins_data[i]['symbol'];
					row.insertCell(3).innerHTML = "<a href='coin.html?id=" + coins_data[i]['id'] + "'>" + coins_data[i]['name'] + "</a>";
		
					if(coins_data[i]['current_price'] == null || coins_data[i]['current_price'] == 0)
						row.insertCell(4).innerHTML = "-";
					else if(coins_data[i]['current_price'] > 1)
						row.insertCell(4).innerHTML = "$" + parseFloat(coins_data[i]['current_price']).toLocaleString('en') ;
					else if(coins_data[i]['current_price'] > 0 && coins_data[i]['current_price'] < 0.0001)
						row.insertCell(4).innerHTML = "$" + parseFloat(coins_data[i]['current_price']).toExponential(3) ;
					else
						row.insertCell(4).innerHTML = "$" + coins_data[i]['current_price'].toFixed(3);
		
					if(localStorage.getItem(user + '-change_hour'))
					{
						if(coins_data[i]['price_change_percentage_1h_in_currency'] == null)
							row.insertCell(5).innerHTML = "-";
						else if(parseFloat(coins_data[i]['price_change_percentage_1h_in_currency']) < 0)
							row.insertCell(5).innerHTML = "<red>" + parseFloat(coins_data[i]['price_change_percentage_1h_in_currency']).toLocaleString('en') + "%</red>";
						else
							row.insertCell(5).innerHTML = "<green>" + parseFloat(coins_data[i]['price_change_percentage_1h_in_currency']).toLocaleString('en') + "%</green>";
					}
					else
						row.insertCell(5);
		
					if(localStorage.getItem(user + '-change_day'))
					{
						if(coins_data[i]['price_change_percentage_24h'] == null)
							row.insertCell(6).innerHTML = "-";
						else if(parseFloat(coins_data[i]['price_change_percentage_24h']) < 0)
							row.insertCell(6).innerHTML = "<red>" + parseFloat(coins_data[i]['price_change_percentage_24h']).toLocaleString('en') + "%</red>";
						else
							row.insertCell(6).innerHTML = "<green>" + parseFloat(coins_data[i]['price_change_percentage_24h']).toLocaleString('en') + "%</green>";
					}
					else
						row.insertCell(6);
		
					if(localStorage.getItem(user + '-change_week'))
					{
						if(coins_data[i]['price_change_percentage_7d_in_currency'] == null)
							row.insertCell(7).innerHTML = "-";
						else if(parseFloat(coins_data[i]['price_change_percentage_7d_in_currency']) < 0)
							row.insertCell(7).innerHTML = "<red>" + parseFloat(coins_data[i]['price_change_percentage_7d_in_currency']).toLocaleString('en') + "%</red>";
						else
							row.insertCell(7).innerHTML = "<green>" + parseFloat(coins_data[i]['price_change_percentage_7d_in_currency']).toLocaleString('en') + "%</green>";
					}
					else
						row.insertCell(7);
		
					if(localStorage.getItem(user + '-change_month'))
					{
						if(coins_data[i]['price_change_percentage_30d_in_currency'] == null)
							row.insertCell(8).innerHTML = "-";
						else if(parseFloat(coins_data[i]['price_change_percentage_30d_in_currency']) < 0)
							row.insertCell(8).innerHTML = "<red>" + parseFloat(coins_data[i]['price_change_percentage_30d_in_currency']).toLocaleString('en') + "%</red>";
						else
							row.insertCell(8).innerHTML = "<green>" + parseFloat(coins_data[i]['price_change_percentage_30d_in_currency']).toLocaleString('en') + "%</green>";
					}
					else
						row.insertCell(8);
		
					if(localStorage.getItem(user + '-change_year'))
					{
						if(coins_data[i]['price_change_percentage_1y_in_currency'] == null)
							row.insertCell(9).innerHTML = "-";
						else if(parseFloat(coins_data[i]['price_change_percentage_1y_in_currency']) < 0)
							row.insertCell(9).innerHTML = "<red>" + parseFloat(coins_data[i]['price_change_percentage_1y_in_currency']).toLocaleString('en') + "%</red>";
						else
							row.insertCell(9).innerHTML = "<green>" + parseFloat(coins_data[i]['price_change_percentage_1y_in_currency']).toLocaleString('en') + "%</green>";
					}
					else
						row.insertCell(9);
		
					if(coins_data[i]['market_cap'] > 0)
						row.insertCell(10).innerHTML = "$" + parseFloat(coins_data[i]['market_cap']).toLocaleString('en') ;
					else
						row.insertCell(10).innerHTML = "-";
		
					if(coins_data[i]['total_volume'] > 0)
						row.insertCell(11).innerHTML = "$" + coins_data[i]['total_volume'].toLocaleString('en') ;
					else
						row.insertCell(11).innerHTML = "-";
		
					if(!localStorage.getItem(user + '-change_year'))
						row.deleteCell(9);
					if(!localStorage.getItem(user + '-change_month'))
						row.deleteCell(8);
					if(!localStorage.getItem(user + '-change_week'))
						row.deleteCell(7);
					if(!localStorage.getItem(user + '-change_day'))
						row.deleteCell(6);
					if(!localStorage.getItem(user + '-change_hour'))
						row.deleteCell(5);
				}
		
				document.getElementById('table_spotlight').style.width = (document.getElementById('coins_table').offsetWidth + 70) + "px";
			}
		
			function sort_data()
			{
				if(sort_attrib == "symbol" || sort_attrib == "name")
				{
					coins_data.sort(function(obj1, obj2) {
						if(obj1[sort_attrib].toLowerCase() > obj2[sort_attrib].toLowerCase())
							return sort_dir*1;
						else if(obj1[sort_attrib] == obj2[sort_attrib])
							return 0;
						else return sort_dir*-1;
					});
				}
				else
				{
					coins_data.sort(function(obj1, obj2) {
						return sort_dir*(obj1[sort_attrib] - obj2[sort_attrib]);
					});
				}
		
				draw_table();
			}
		
			function toggle_sort(attrib)
			{
				if(sort_attrib == attrib)
					sort_dir *= -1;
				else
				{
					sort_attrib = attrib;
					sort_dir = -1;
				}
		
				sort_data();
			}
		
			function fetch_table_coingecko()
			{
				//alert('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=' + ids.join(',') + '&order=market_cap_desc&per_page=50&page=' + page_no + '&sparkline=false&price_change_percentage=1h,24h,7d,30d,1y');
				$(document).ready(function(){
					$.get(
			    	    'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=' + ids.join(',') + '&order=market_cap_desc&per_page=50&page=' + page_no + '&sparkline=false&price_change_percentage=1h,24h,7d,30d,1y',              
						function(data) {
							coins_data = data;
		
							if(sort_attrib == "market_cap" && sort_dir == -1)
								draw_table();
							else
								sort_data();
					}).fail(function() {
						clear_table();
						document.getElementById('loading_gif').style.visibility = "hidden";
						document.getElementById('loading_gif').style.display = "none";
						document.getElementById("table_spotlight").style.width = "600px";
		
						alert("failed to fetch coins information, please try again");
					});
				});
			}
		
			function refresh_table()
			{
				if(refresh_ms > 0)
					sleep(refresh_ms).then(() => { fetch_table_coingecko(); refresh_table(); });
			}
		
			function prev_page()
			{
				if(page_no + 1 > no_pages)
					document.getElementById('next_page_link').style.visibility = "visible";
		
				if(page_no > 1)
				{
					page_no--;
					fetch_table_coingecko();
		
					if(page_no == 1)
						document.getElementById('prev_page_link').style.visibility = "hidden";
				}
			}
		
			function next_page()
			{
				if(page_no == 1)
					document.getElementById('prev_page_link').style.visibility = "visible";
		
				if(page_no + 1 <= no_pages)
				{
					page_no++;
					fetch_table_coingecko();
		
					if(page_no + 1 > no_pages)
						document.getElementById('next_page_link').style.visibility = "hidden";
				}
			}
		
			function goto_page()
			{
				if(page_no == 1)
					document.getElementById('prev_page_link').style.visibility = "visible";
				else if(page_no == no_pages)
					document.getElementById('next_page_link').style.visibility = "visible";
		
				page_no = document.getElementById('page_input').value;
		
				if(page_no > no_pages)
				{
					document.getElementById('page_input').value = no_pages;
					page_no = no_pages;
				}
				else if(page_no < 1)
				{
					document.getElementById('page_input').value = 1;
					page_no = 1;
				}
		
				if(page_no == 1)
					document.getElementById('prev_page_link').style.visibility = "hidden";
				else if(page_no == no_pages)
					document.getElementById('next_page_link').style.visibility = "hidden";
		
				fetch_table_coingecko();
			}
		
			function search_coins()
			{
				page_no = 1;
				ids = [];
				var no_coins_found = 0;
		
				var search_term = document.getElementById("search_input").value.toLowerCase();
		
				if(search_term == "")
				{
					alert("no search term provided");
					return;
				}
		
				document.getElementById('table_spotlight').style.display = "block";
				document.getElementById('coins_table').style.display = "none";
				document.getElementById('next_page_link').style.visibility = "visible";
				document.getElementById('page_input').style.visibility = "visible";
				document.getElementById('prev_page_link').style.visibility = "hidden";
				document.getElementById('no_results_msg').style.display = "none";
				document.getElementById('loading_gif').style.visibility = "visible";
				document.getElementById('loading_gif').style.display = "block";
		
				for(var i=0; i<all_coins_data.length; i++)
				{
					if(all_coins_data[i]['symbol'] == search_term ||
						all_coins_data[i]['name'] == search_term ||
						all_coins_data[i]['id'] == search_term)
					{
						no_coins_found++; 
		
						ids.unshift(all_coins_data[i]['id']);
					}
					else if(all_coins_data[i]['symbol'].toLowerCase().search(search_term) != -1 ||
						all_coins_data[i]['name'].toLowerCase().search(search_term) != -1 ||
						all_coins_data[i]['id'].toLowerCase().search(search_term) != -1)
					{
						no_coins_found++;
		
						ids.push(all_coins_data[i]['id']);
					}
				}
		
				if(no_coins_found > 0)
				{
					var max_no_results = 400;
		
					if(no_coins_found > max_no_results)
					{
						ids.splice(max_no_results, no_coins_found-max_no_results);
						no_coins_found = max_no_results;
					}
		
					no_pages = Math.ceil(no_coins_found/50);
					if(no_pages == 1)
					{
						document.getElementById('next_page_link').style.visibility = "hidden";
						document.getElementById('page_input').style.visibility = "hidden";
					}
		
					fetch_table_coingecko();
					//refresh_table();
				}
				else
				{
					document.getElementById('loading_gif').style.visibility = "hidden";
					document.getElementById('loading_gif').style.display = "none";
					document.getElementById("coins_table").style.display = "none";
					document.getElementById('table_spotlight').style.width = "500px";
					document.getElementById('no_results_msg').innerHTML = "<p style='margin-top: 20px; margin-bottom: 10px'>No coins found for '" + search_term + "'</p>";
					document.getElementById('no_results_msg').style.display = "inline";
				}
			}
		
			function fetch_coins_list()
			{
				$(document).ready(function(){
					$.get(
			    	    'https://api.coingecko.com/api/v3/coins/list',              
						function(data) {
							all_coins_data = data;
							if(document.getElementById('search_input').value != "")
							{
								clear_table();
								search_coins();
								document.getElementById("search_input").scrollIntoView();
							}
					}).fail(function() {
						clear_table();
						document.getElementById('loading_gif').style.visibility = "hidden";
						document.getElementById('loading_gif').style.display = "none";
						document.getElementById("table_spotlight").style.width = "600px";
		
						document.getElementById("table_div").innerHTML = "<p style='margin-top: 20px; margin-bottom: 10px'>failed to fetch coins information, please refresh to try again.</p>";
					});
				});
			}
		
			function keydown(e)
			{
				var code = e.keyCode;
				
				if(document.activeElement.tagName == "INPUT")
				{
					if(code == 13)
					{
						if(document.activeElement.id == "page_input")
							goto_page();
						else if(document.activeElement.id == "contract_input")
							window.location.href = "coin.html?network=" + search_network + "&contract_address=" + document.getElementById('contract_input').value;
						else if(document.activeElement.id == "search_input")
						{
							clear_table();
							sleep(50).then(() => { search_coins() });
						}
					}
				}
				else
				{
					switch (code) 
					{
						
						case 37: prev_page(); break; //Left key
						case 39: next_page(); break; //Right key
					}
				}
			}
		
			if(param_map.get('term') != undefined)
				document.getElementById('search_input').value = param_map.get('term');
		
			document.getElementById('table_spotlight').style.width = (document.getElementById('loading_gif').offsetWidth + 400) + "px";
		
			fetch_coins_list();
					
		</script>

		<!-- Footer -->
		<div class="footer wrapper">
			<div class="inner" style="text-align:center">
				<noselect>
					<p>
						<a href="search.html" title='search'><i class="fas fa-search fa-2x"></i></a> &nbsp;
						<a href="coins.html" title='coins'><i class="fas fa-coins fa-2x"></i></a> &nbsp;
						<a href="categories.html" title='categories'><i class="fas fa-cubes fa-2x"></i></a> &nbsp;
						<a href="charts.html" title='charts'><i class="fas fa-chart-area fa-2x"></i></a> &nbsp;
						<a href="news.html" title='news'><i class="fas fa-newspaper fa-2x"></i></a> &nbsp;
						<a href="scams.html" title='scams'><i class="fas fa-bomb fa-2x"></i></a> &nbsp;
						<a href="watchlist.html" title='watchlist'><i class="fas fa-binoculars fa-2x"></i></a> &nbsp;
						<a href="wallet.html" title='wallet tracker'><i class="fas fa-wallet fa-2x"></i></a><br>
						
						<a href="https://t.me/dexata_army" title='telegram'><i class="icon brands fa-telegram-plane fa-2x"></i></a> &nbsp;
						<a href="https://twitter.com/dexata_army" title='twitter'><i class="icon brands fa-twitter fa-2x"></i></a> &nbsp;
						<a href="https://github.com/dexata-army" title='github'><i class="icon brands fa-github-alt fa-2x"></i></a> &nbsp;
						<a href="config.html" title='config'><i class="fas fa-cogs fa-2x"></i></a> &nbsp;
						<a href="manage_users.html" title='manage users'><i class="fas fa-user-cog fa-2x"></i></a> &nbsp;
						<text id="login_footer_item" style="display: inline-block"><a href="login.html" title='login'><i class="fas fa-sign-in-alt fa-2x"></i></a></text>
					</p>
		
					<p>
						<input id="footer_search_box" placeholder="search">
					</p>
		
					<p class="copyright">
						&copy;<script>document.write(new Date().getFullYear())</script> Dexata
					</p>
				</noselect>
			</div>
		</div>
		
		<script>
			window.addEventListener('keydown',this.keydown,false);
		
			function keydown(e)
			{
				var code = e.keyCode;
				
				if(document.activeElement.tagName == "INPUT")
				{
					if(code == 13)
					{
						if(document.activeElement.id == "footer_search_box" &&
							document.getElementById('footer_search_box').value != "")
						{
							window.location.href = "search.html?term=" + document.getElementById('footer_search_box').value;
						}
					}
				}
			}
		</script>

		<script>
			//changes login to logout on page if logged in
			if(localStorage.getItem("username"))
			{
				//document.getElementById('login_menu_item').innerHTML = "<a onclick='logout()'>logout</a>";
				//document.getElementById('login_footer_item').innerHTML = "<a onclick='logout()' title='logout'><i class='fas fa-sign-out-alt fa-2x'></i></a>";
				document.getElementById('login_menu_item').innerHTML = "<a href='logout.html?return_to=" + window.location.href.substring(window.location.href.lastIndexOf('/') + 1) + "'>logout</a>"
				document.getElementById('login_footer_item').innerHTML = "<a href='logout.html?return_to=" + window.location.href.substring(window.location.href.lastIndexOf('/') + 1) + "'><i class='fas fa-sign-out-alt fa-2x'></i></a>"
			}
			else
			{
				document.getElementById('login_menu_item').innerHTML = "<a href='login.html?return_to=" + window.location.href.substring(window.location.href.lastIndexOf('/') + 1) + "'>login</a>"
				document.getElementById('login_footer_item').innerHTML = "<a href='login.html?return_to=" + window.location.href.substring(window.location.href.lastIndexOf('/') + 1) + "'><i class='fas fa-sign-in-alt fa-2x'></i></a>"
			}
		
			//prevent autocomplete
			$(':input').on('focus', function () {
				$(this).attr('autocomplete', 'off')
			});
		</script>

		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
	</body>
</html>
